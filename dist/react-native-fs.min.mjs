var e=require("react-native").NativeModules.RNFSManager,r=new(0,require("react-native").NativeEventEmitter)(e),o=require("base-64"),t=require("utf8"),i="ios"===require("react-native").Platform.OS,n=e.RNFSFileTypeRegular,a=e.RNFSFileTypeDirectory,s=0,l=()=>s+=1,d=e=>e.startsWith("file://")?e.slice(7):e;function c(e,r,i){var n={encoding:"utf8"};return i&&("string"==typeof i?n.encoding=i:"object"==typeof i&&(n=i)),r(d(e)).then((e=>{var r;if("utf8"===n.encoding)r=t.decode(o.decode(e));else if("ascii"===n.encoding)r=o.decode(e);else{if("base64"!==n.encoding)throw new Error('Invalid encoding type "'+String(n.encoding)+'"');r=e}return r}))}function p(e,r){return r(d(e)).then((e=>e.map((e=>({ctime:e.ctime&&new Date(1e3*e.ctime)||null,mtime:e.mtime&&new Date(1e3*e.mtime)||null,name:e.name,path:e.path,size:e.size,isFile:()=>e.type===n,isDirectory:()=>e.type===a})))))}var u={mkdir:(r,o={})=>e.mkdir(d(r),o).then((()=>{})),moveFile:(r,o,t={})=>e.moveFile(d(r),d(o),t).then((()=>{})),copyFile:(r,o,t={})=>e.copyFile(d(r),d(o),t).then((()=>{})),pathForBundle:r=>e.pathForBundle(r),pathForGroup:r=>e.pathForGroup(r),getFSInfo:()=>e.getFSInfo(),getAllExternalFilesDirs:()=>e.getAllExternalFilesDirs(),unlink:r=>e.unlink(d(r)).then((()=>{})),exists:r=>e.exists(d(r)),stopDownload(r){e.stopDownload(r)},resumeDownload(r){e.resumeDownload(r)},isResumable:r=>e.isResumable(r),stopUpload(r){e.stopUpload(r)},completeHandlerIOS:r=>e.completeHandlerIOS(r),readDir:r=>p(r,e.readDir),readDirAssets(r){if(!e.readDirAssets)throw new Error("readDirAssets is not available on this platform");return p(r,e.readDirAssets)},existsAssets(r){if(!e.existsAssets)throw new Error("existsAssets is not available on this platform");return e.existsAssets(r)},existsRes(r){if(!e.existsRes)throw new Error("existsRes is not available on this platform");return e.existsRes(r)},readdir:e=>u.readDir(d(e)).then((e=>e.map((e=>e.name)))),setReadable:(r,o,t)=>e.setReadable(r,o,t).then((e=>e)),stat:r=>e.stat(d(r)).then((e=>({"path":r,"ctime":new Date(1e3*e.ctime),"mtime":new Date(1e3*e.mtime),"size":e.size,"mode":e.mode,"originalFilepath":e.originalFilepath,isFile:()=>e.type===n,isDirectory:()=>e.type===a}))),readFile:(r,o)=>c(r,e.readFile,o),read(r,i=0,n=0,a){var s={encoding:"utf8"};return a&&("string"==typeof a?s.encoding=a:"object"==typeof a&&(s=a)),e.read(d(r),i,n).then((e=>{var r;if("utf8"===s.encoding)r=t.decode(o.decode(e));else if("ascii"===s.encoding)r=o.decode(e);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+String(s.encoding)+'"');r=e}return r}))},readFileAssets(r,o){if(!e.readFileAssets)throw new Error("readFileAssets is not available on this platform");return c(r,e.readFileAssets,o)},readFileRes(r,o){if(!e.readFileRes)throw new Error("readFileRes is not available on this platform");return c(r,e.readFileRes,o)},hash:(r,o)=>e.hash(d(r),o),copyFileAssets(r,o){if(!e.copyFileAssets)throw new Error("copyFileAssets is not available on this platform");return e.copyFileAssets(d(r),d(o)).then((()=>{}))},copyFileRes(r,o){if(!e.copyFileRes)throw new Error("copyFileRes is not available on this platform");return e.copyFileRes(r,d(o)).then((()=>{}))},copyAssetsFileIOS:(r,o,t,i,n=1,a=1,s="contain")=>e.copyAssetsFileIOS(r,o,t,i,n,a,s),copyAssetsVideoIOS:(r,o)=>e.copyAssetsVideoIOS(r,o),writeFile(r,i,n){var a,s={encoding:"utf8"};if(n&&("string"==typeof n?s.encoding=n:"object"==typeof n&&(s={...s,...n})),"utf8"===s.encoding)a=o.encode(t.encode(i));else if("ascii"===s.encoding)a=o.encode(i);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+s.encoding+'"');a=i}return e.writeFile(d(r),a,s).then((()=>{}))},appendFile(r,i,n){var a,s={encoding:"utf8"};if(n&&("string"==typeof n?s.encoding=n:"object"==typeof n&&(s=n)),"utf8"===s.encoding)a=o.encode(t.encode(i));else if("ascii"===s.encoding)a=o.encode(i);else{if("base64"!==s.encoding)throw new Error('Invalid encoding type "'+s.encoding+'"');a=i}return e.appendFile(d(r),a)},write(r,i,n,a){var s,l={encoding:"utf8"};if(a&&("string"==typeof a?l.encoding=a:"object"==typeof a&&(l=a)),"utf8"===l.encoding)s=o.encode(t.encode(i));else if("ascii"===l.encoding)s=o.encode(i);else{if("base64"!==l.encoding)throw new Error('Invalid encoding type "'+l.encoding+'"');s=i}return void 0===n&&(n=-1),e.write(d(r),s,n).then((()=>{}))},downloadFile(o){if("object"!=typeof o)throw new Error("downloadFile: Invalid value for argument `options`");if("string"!=typeof o.fromUrl)throw new Error("downloadFile: Invalid value for property `fromUrl`");if("string"!=typeof o.toFile)throw new Error("downloadFile: Invalid value for property `toFile`");if(o.headers&&"object"!=typeof o.headers)throw new Error("downloadFile: Invalid value for property `headers`");if(o.background&&"boolean"!=typeof o.background)throw new Error("downloadFile: Invalid value for property `background`");if(o.progressDivider&&"number"!=typeof o.progressDivider)throw new Error("downloadFile: Invalid value for property `progressDivider`");if(o.progressInterval&&"number"!=typeof o.progressInterval)throw new Error("downloadFile: Invalid value for property `progressInterval`");if(o.readTimeout&&"number"!=typeof o.readTimeout)throw new Error("downloadFile: Invalid value for property `readTimeout`");if(o.connectionTimeout&&"number"!=typeof o.connectionTimeout)throw new Error("downloadFile: Invalid value for property `connectionTimeout`");if(o.backgroundTimeout&&"number"!=typeof o.backgroundTimeout)throw new Error("downloadFile: Invalid value for property `backgroundTimeout`");var t=l(),i=[];o.begin&&i.push(r.addListener("DownloadBegin",(e=>{e.jobId===t&&o.begin(e)}))),o.progress&&i.push(r.addListener("DownloadProgress",(e=>{e.jobId===t&&o.progress(e)}))),o.resumable&&i.push(r.addListener("DownloadResumable",(e=>{e.jobId===t&&o.resumable()})));var n={jobId:t,fromUrl:o.fromUrl,toFile:d(o.toFile),headers:o.headers||{},background:!!o.background,progressDivider:o.progressDivider||0,progressInterval:o.progressInterval||0,readTimeout:o.readTimeout||15e3,connectionTimeout:o.connectionTimeout||5e3,backgroundTimeout:o.backgroundTimeout||36e5,hasBeginCallback:o.begin instanceof Function,hasProgressCallback:o.progress instanceof Function,hasResumableCallback:o.resumable instanceof Function};return{jobId:t,promise:e.downloadFile(n).then((e=>(i.forEach((e=>e.remove())),e))).catch((e=>Promise.reject(e)))}},uploadFiles(o){if(!e.uploadFiles)return{jobId:-1,promise:Promise.reject(new Error("`uploadFiles` is unsupported on this platform"))};var t=l(),i=[];if("object"!=typeof o)throw new Error("uploadFiles: Invalid value for argument `options`");if("string"!=typeof o.toUrl)throw new Error("uploadFiles: Invalid value for property `toUrl`");if(!Array.isArray(o.files))throw new Error("uploadFiles: Invalid value for property `files`");if(o.headers&&"object"!=typeof o.headers)throw new Error("uploadFiles: Invalid value for property `headers`");if(o.fields&&"object"!=typeof o.fields)throw new Error("uploadFiles: Invalid value for property `fields`");if(o.method&&"string"!=typeof o.method)throw new Error("uploadFiles: Invalid value for property `method`");return o.begin?i.push(r.addListener("UploadBegin",o.begin)):o.beginCallback&&i.push(r.addListener("UploadBegin",o.beginCallback)),o.progress?i.push(r.addListener("UploadProgress",o.progress)):o.progressCallback&&i.push(r.addListener("UploadProgress",o.progressCallback)),{jobId:t,promise:e.uploadFiles({jobId:t,toUrl:o.toUrl,files:o.files,binaryStreamOnly:o.binaryStreamOnly||!1,headers:o.headers||{},fields:o.fields||{},method:o.method||"POST",hasBeginCallback:o.begin instanceof Function||o.beginCallback instanceof Function,hasProgressCallback:o.progress instanceof Function||o.progressCallback instanceof Function}).then((e=>(i.forEach((e=>e.remove())),e)))}},touch(r,o,t){if(t&&!(t instanceof Date))throw new Error("touch: Invalid value for argument `ctime`");if(o&&!(o instanceof Date))throw new Error("touch: Invalid value for argument `mtime`");var n=0;return i&&(n=t&&t.getTime()),e.touch(d(r),o&&o.getTime(),n)},scanFile:r=>e.scanFile(r),MainBundlePath:e.RNFSMainBundlePath,CachesDirectoryPath:e.RNFSCachesDirectoryPath,ExternalCachesDirectoryPath:e.RNFSExternalCachesDirectoryPath,DocumentDirectoryPath:e.RNFSDocumentDirectoryPath,DownloadDirectoryPath:e.RNFSDownloadDirectoryPath,ExternalDirectoryPath:e.RNFSExternalDirectoryPath,ExternalStorageDirectoryPath:e.RNFSExternalStorageDirectoryPath,TemporaryDirectoryPath:e.RNFSTemporaryDirectoryPath,LibraryDirectoryPath:e.RNFSLibraryDirectoryPath,PicturesDirectoryPath:e.RNFSPicturesDirectoryPath,FileProtectionKeys:e.RNFSFileProtectionKeys};module.exports=u;
export default {};
//# sourceMappingURL=react-native-fs.min.mjs.map
